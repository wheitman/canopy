(function(){function u(b,E,f){function i(l,d){if(!E[l]){if(!b[l]){var T=typeof require=="function"&&require;if(!d&&T)return T(l,!0);if(v)return v(l,!0);var m=new Error("Cannot find module '"+l+"'");throw m.code="MODULE_NOT_FOUND",m}var n=E[l]={exports:{}};b[l][0].call(n.exports,function(o){var t=b[l][1][o];return i(t||o)},n,n.exports,u,b,E,f)}return E[l].exports}for(var v=typeof require=="function"&&require,s=0;s<f.length;s++)i(f[s]);return i}return u})()({1:[function(u,b,E){(function(f,i){var v=Math.pow(2,-24),s=Math.pow(2,32),l=Math.pow(2,53);function d(n){var o=new ArrayBuffer(256),t=new DataView(o),c,a=0;function g(R){for(var G=o.byteLength,F=a+R;G<F;)G*=2;if(G!==o.byteLength){var j=t;o=new ArrayBuffer(G),t=new DataView(o);for(var W=a+3>>2,L=0;L<W;++L)t.setUint32(L*4,j.getUint32(L*4))}return c=R,t}function k(){a+=c}function A(R){k(g(8).setFloat64(a,R))}function M(R){k(g(1).setUint8(a,R))}function O(R){for(var G=g(R.length),F=0;F<R.length;++F)G.setUint8(a+F,R[F]);k()}function N(R){k(g(2).setUint16(a,R))}function P(R){k(g(4).setUint32(a,R))}function B(R){var G=R%s,F=(R-G)/s,j=g(8);j.setUint32(a,F),j.setUint32(a+4,G),k()}function Q(R,G){G<24?M(R<<5|G):G<256?(M(R<<5|24),M(G)):G<65536?(M(R<<5|25),N(G)):G<4294967296?(M(R<<5|26),P(G)):(M(R<<5|27),B(G))}function X(R){var G;if(R===!1)return M(244);if(R===!0)return M(245);if(R===null)return M(246);if(R===i)return M(247);switch(typeof R){case"number":if(Math.floor(R)===R){if(0<=R&&R<=l)return Q(0,R);if(-l<=R&&R<0)return Q(1,-(R+1))}return M(251),A(R);case"string":var F=[];for(G=0;G<R.length;++G){var j=R.charCodeAt(G);j<128?F.push(j):j<2048?(F.push(192|j>>6),F.push(128|j&63)):j<55296?(F.push(224|j>>12),F.push(128|j>>6&63),F.push(128|j&63)):(j=(j&1023)<<10,j|=R.charCodeAt(++G)&1023,j+=65536,F.push(240|j>>18),F.push(128|j>>12&63),F.push(128|j>>6&63),F.push(128|j&63))}return Q(3,F.length),O(F);default:var W;if(Array.isArray(R))for(W=R.length,Q(4,W),G=0;G<W;++G)X(R[G]);else if(R instanceof Uint8Array)Q(2,R.length),O(R);else{var L=Object.keys(R);for(W=L.length,Q(5,W),G=0;G<W;++G){var I=L[G];X(I),X(R[I])}}}}if(X(n),"slice"in o)return o.slice(0,a);for(var Z=new ArrayBuffer(a),K=new DataView(Z),D=0;D<a;++D)K.setUint8(D,t.getUint8(D));return Z}function T(n,o,t){var c=new DataView(n),a=0;typeof o!="function"&&(o=function(F){return F}),typeof t!="function"&&(t=function(){return i});function g(F,j){return a+=j,F}function k(F){return g(new Uint8Array(n,a,F),F)}function A(){var F=new ArrayBuffer(4),j=new DataView(F),W=P(),L=W&32768,I=W&31744,q=W&1023;if(I===31744)I=261120;else if(I!==0)I+=114688;else if(q!==0)return q*v;return j.setUint32(0,L<<16|I<<13|q<<13),j.getFloat32(0)}function M(){return g(c.getFloat32(a),4)}function O(){return g(c.getFloat64(a),8)}function N(){return g(c.getUint8(a),1)}function P(){return g(c.getUint16(a),2)}function B(){return g(c.getUint32(a),4)}function Q(){return B()*s+B()}function X(){return c.getUint8(a)!==255?!1:(a+=1,!0)}function Z(F){if(F<24)return F;if(F===24)return N();if(F===25)return P();if(F===26)return B();if(F===27)return Q();if(F===31)return-1;throw"Invalid length encoding"}function K(F){var j=N();if(j===255)return-1;var W=Z(j&31);if(W<0||j>>5!==F)throw"Invalid indefinite length element";return W}function D(F,j){for(var W=0;W<j;++W){var L=N();L&128&&(L<224?(L=(L&31)<<6|N()&63,j-=1):L<240?(L=(L&15)<<12|(N()&63)<<6|N()&63,j-=2):(L=(L&15)<<18|(N()&63)<<12|(N()&63)<<6|N()&63,j-=3)),L<65536?F.push(L):(L-=65536,F.push(55296|L>>10),F.push(56320|L&1023))}}function R(){var F=N(),j=F>>5,W=F&31,L,I;if(j===7)switch(W){case 25:return A();case 26:return M();case 27:return O()}if(I=Z(W),I<0&&(j<2||6<j))throw"Invalid length";switch(j){case 0:return I;case 1:return-1-I;case 2:if(I<0){for(var q=[],re=0;(I=K(j))>=0;)re+=I,q.push(k(I));var e=new Uint8Array(re),r=0;for(L=0;L<q.length;++L)e.set(q[L],r),r+=q[L].length;return e}return k(I);case 3:var h=[];if(I<0)for(;(I=K(j))>=0;)D(h,I);else D(h,I);return String.fromCharCode.apply(null,h);case 4:var p;if(I<0)for(p=[];!X();)p.push(R());else for(p=new Array(I),L=0;L<I;++L)p[L]=R();return p;case 5:var y={};for(L=0;L<I||I<0&&!X();++L){var w=R();y[w]=R()}return y;case 6:return o(R(),I);case 7:switch(I){case 20:return!1;case 21:return!0;case 22:return null;case 23:return i;default:return t(I)}}}var G=R();if(a!==n.byteLength)throw"Remaining bytes";return G}var m={encode:d,decode:T};typeof define=="function"&&define.amd?define("cbor/cbor",m):typeof b<"u"&&b.exports?b.exports=m:f.CBOR||(f.CBOR=m)})(this)},{}],2:[function(u,b,E){(function(f,i){(function(){(function(v){var s=Object.hasOwnProperty,l=Array.isArray?Array.isArray:function(r){return Object.prototype.toString.call(r)==="[object Array]"},d=10,T=typeof f=="object"&&typeof f.nextTick=="function",m=typeof Symbol=="function",n=typeof Reflect=="object",o=typeof i=="function",t=o?i:setTimeout,c=m?n&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(e){var r=Object.getOwnPropertyNames(e);return r.push.apply(r,Object.getOwnPropertySymbols(e)),r}:Object.keys;function a(){this._events={},this._conf&&g.call(this,this._conf)}function g(e){e&&(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),e.maxListeners!==v&&(this._maxListeners=e.maxListeners),e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),e.ignoreErrors&&(this.ignoreErrors=e.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function k(e,r){var h="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(h+=" Event name: "+r+"."),typeof f<"u"&&f.emitWarning){var p=new Error(h);p.name="MaxListenersExceededWarning",p.emitter=this,p.count=e,f.emitWarning(p)}else console.error(h),console.trace&&console.trace()}var A=function(e,r,h){var p=arguments.length;switch(p){case 0:return[];case 1:return[e];case 2:return[e,r];case 3:return[e,r,h];default:for(var y=new Array(p);p--;)y[p]=arguments[p];return y}};function M(e,r){for(var h={},p,y=e.length,w=0,_=0;_<y;_++)p=e[_],h[p]=_<w?r[_]:v;return h}function O(e,r,h){this._emitter=e,this._target=r,this._listeners={},this._listenersCount=0;var p,y;if((h.on||h.off)&&(p=h.on,y=h.off),r.addEventListener?(p=r.addEventListener,y=r.removeEventListener):r.addListener?(p=r.addListener,y=r.removeListener):r.on&&(p=r.on,y=r.off),!p&&!y)throw Error("target does not implement any known event API");if(typeof p!="function")throw TypeError("on method must be a function");if(typeof y!="function")throw TypeError("off method must be a function");this._on=p,this._off=y;var w=e._observers;w?w.push(this):e._observers=[this]}Object.assign(O.prototype,{subscribe:function(e,r,h){var p=this,y=this._target,w=this._emitter,_=this._listeners,U=function(){var x=A.apply(null,arguments),S={data:x,name:r,original:e};if(h){var C=h.call(y,S);C!==!1&&w.emit.apply(w,[S.name].concat(x));return}w.emit.apply(w,[r].concat(x))};if(_[e])throw Error("Event '"+e+"' is already listening");this._listenersCount++,w._newListener&&w._removeListener&&!p._onNewListener?(this._onNewListener=function(x){x===r&&_[e]===null&&(_[e]=U,p._on.call(y,e,U))},w.on("newListener",this._onNewListener),this._onRemoveListener=function(x){x===r&&!w.hasListeners(x)&&_[e]&&(_[e]=null,p._off.call(y,e,U))},_[e]=null,w.on("removeListener",this._onRemoveListener)):(_[e]=U,p._on.call(y,e,U))},unsubscribe:function(e){var r=this,h=this._listeners,p=this._emitter,y,w,_=this._off,U=this._target,x;if(e&&typeof e!="string")throw TypeError("event must be a string");function S(){r._onNewListener&&(p.off("newListener",r._onNewListener),p.off("removeListener",r._onRemoveListener),r._onNewListener=null,r._onRemoveListener=null);var C=K.call(p,r);p._observers.splice(C,1)}if(e){if(y=h[e],!y)return;_.call(U,e,y),delete h[e],--this._listenersCount||S()}else{for(w=c(h),x=w.length;x-- >0;)e=w[x],_.call(U,e,h[e]);this._listeners={},this._listenersCount=0,S()}}});function N(e,r,h,p){var y=Object.assign({},r);if(!e)return y;if(typeof e!="object")throw TypeError("options must be an object");var w=Object.keys(e),_=w.length,U,x,S;function C(z){throw Error('Invalid "'+U+'" option value'+(z?". Reason: "+z:""))}for(var Y=0;Y<_;Y++){if(U=w[Y],!s.call(r,U))throw Error('Unknown "'+U+'" option');x=e[U],x!==v&&(S=h[U],y[U]=S?S(x,C):x)}return y}function P(e,r){return(typeof e!="function"||!e.hasOwnProperty("prototype"))&&r("value must be a constructor"),e}function B(e){var r="value must be type of "+e.join("|"),h=e.length,p=e[0],y=e[1];return h===1?function(w,_){if(typeof w===p)return w;_(r)}:h===2?function(w,_){var U=typeof w;if(U===p||U===y)return w;_(r)}:function(w,_){for(var U=typeof w,x=h;x-- >0;)if(U===e[x])return w;_(r)}}var Q=B(["function"]),X=B(["object","function"]);function Z(e,r,h){var p,y,w=0,_,U=new e(function(x,S,C){h=N(h,{timeout:0,overload:!1},{timeout:function(J,H){return J*=1,(typeof J!="number"||J<0||!Number.isFinite(J))&&H("timeout must be a positive number"),J}}),p=!h.overload&&typeof e.prototype.cancel=="function"&&typeof C=="function";function Y(){y&&(y=null),w&&(clearTimeout(w),w=0)}var z=function(J){Y(),x(J)},V=function(J){Y(),S(J)};p?r(z,V,C):(y=[function(J){V(J||Error("canceled"))}],r(z,V,function(J){if(_)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof J!="function")throw TypeError("onCancel callback must be a function");y.push(J)}),_=!0),h.timeout>0&&(w=setTimeout(function(){var J=Error("timeout");J.code="ETIMEDOUT",w=0,U.cancel(J),S(J)},h.timeout))});return p||(U.cancel=function(x){if(y){for(var S=y.length,C=1;C<S;C++)y[C](x);y[0](x),y=null}}),U}function K(e){var r=this._observers;if(!r)return-1;for(var h=r.length,p=0;p<h;p++)if(r[p]._target===e)return p;return-1}function D(e,r,h,p,y){if(!h)return null;if(p===0){var w=typeof r;if(w==="string"){var _,U,x=0,S=0,C=this.delimiter,Y=C.length;if((U=r.indexOf(C))!==-1){_=new Array(5);do _[x++]=r.slice(S,U),S=U+Y;while((U=r.indexOf(C,S))!==-1);_[x++]=r.slice(S),r=_,y=x}else r=[r],y=1}else w==="object"?y=r.length:(r=[r],y=1)}var z=null,V,J,H,ie,se,te=r[p],ne=r[p+1],ee,$;if(p===y)h._listeners&&(typeof h._listeners=="function"?(e&&e.push(h._listeners),z=[h]):(e&&e.push.apply(e,h._listeners),z=[h]));else if(te==="*"){for(ee=c(h),U=ee.length;U-- >0;)V=ee[U],V!=="_listeners"&&($=D(e,r,h[V],p+1,y),$&&(z?z.push.apply(z,$):z=$));return z}else if(te==="**"){for(se=p+1===y||p+2===y&&ne==="*",se&&h._listeners&&(z=D(e,r,h,y,y)),ee=c(h),U=ee.length;U-- >0;)V=ee[U],V!=="_listeners"&&(V==="*"||V==="**"?(h[V]._listeners&&!se&&($=D(e,r,h[V],y,y),$&&(z?z.push.apply(z,$):z=$)),$=D(e,r,h[V],p,y)):V===ne?$=D(e,r,h[V],p+2,y):$=D(e,r,h[V],p,y),$&&(z?z.push.apply(z,$):z=$));return z}else h[te]&&(z=D(e,r,h[te],p+1,y));if(J=h["*"],J&&D(e,r,J,p+1,y),H=h["**"],H)if(p<y)for(H._listeners&&D(e,r,H,y,y),ee=c(H),U=ee.length;U-- >0;)V=ee[U],V!=="_listeners"&&(V===ne?D(e,r,H[V],p+2,y):V===te?D(e,r,H[V],p+1,y):(ie={},ie[V]=H[V],D(e,r,{"**":ie},p+1,y)));else H._listeners?D(e,r,H,y,y):H["*"]&&H["*"]._listeners&&D(e,r,H["*"],y,y);return z}function R(e,r,h){var p=0,y=0,w,_=this.delimiter,U=_.length,x;if(typeof e=="string")if((w=e.indexOf(_))!==-1){x=new Array(5);do x[p++]=e.slice(y,w),y=w+U;while((w=e.indexOf(_,y))!==-1);x[p++]=e.slice(y)}else x=[e],p=1;else x=e,p=e.length;if(p>1){for(w=0;w+1<p;w++)if(x[w]==="**"&&x[w+1]==="**")return}var S=this.listenerTree,C;for(w=0;w<p;w++)if(C=x[w],S=S[C]||(S[C]={}),w===p-1)return S._listeners?(typeof S._listeners=="function"&&(S._listeners=[S._listeners]),h?S._listeners.unshift(r):S._listeners.push(r),!S._listeners.warned&&this._maxListeners>0&&S._listeners.length>this._maxListeners&&(S._listeners.warned=!0,k.call(this,S._listeners.length,C))):S._listeners=r,!0;return!0}function G(e,r,h,p){for(var y=c(e),w=y.length,_,U,x,S=e._listeners,C;w-- >0;)U=y[w],_=e[U],U==="_listeners"?x=h:x=h?h.concat(U):[U],C=p||typeof U=="symbol",S&&r.push(C?x:x.join(this.delimiter)),typeof _=="object"&&G.call(this,_,r,x,C);return r}function F(e){for(var r=c(e),h=r.length,p,y,w;h-- >0;)y=r[h],p=e[y],p&&(w=!0,y!=="_listeners"&&!F(p)&&delete e[y]);return w}function j(e,r,h){this.emitter=e,this.event=r,this.listener=h}j.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function W(e,r,h){if(h===!0)y=!0;else if(h===!1)p=!0;else{if(!h||typeof h!="object")throw TypeError("options should be an object or true");var p=h.async,y=h.promisify,w=h.nextTick,_=h.objectify}if(p||w||y){var U=r,x=r._origin||r;if(w&&!T)throw Error("process.nextTick is not supported");y===v&&(y=r.constructor.name==="AsyncFunction"),r=function(){var S=arguments,C=this,Y=this.event;return y?w?Promise.resolve():new Promise(function(z){t(z)}).then(function(){return C.event=Y,U.apply(C,S)}):(w?f.nextTick:t)(function(){C.event=Y,U.apply(C,S)})},r._async=!0,r._origin=x}return[r,_?new j(this,e,r):this]}function L(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,g.call(this,e)}L.EventEmitter2=L,L.prototype.listenTo=function(e,r,h){if(typeof e!="object")throw TypeError("target musts be an object");var p=this;h=N(h,{on:v,off:v,reducers:v},{on:Q,off:Q,reducers:X});function y(w){if(typeof w!="object")throw TypeError("events must be an object");var _=h.reducers,U=K.call(p,e),x;U===-1?x=new O(p,e,h):x=p._observers[U];for(var S=c(w),C=S.length,Y,z=typeof _=="function",V=0;V<C;V++)Y=S[V],x.subscribe(Y,w[Y]||Y,z?_:_&&_[Y])}return l(r)?y(M(r)):y(typeof r=="string"?M(r.split(/\s+/)):r),this},L.prototype.stopListeningTo=function(e,r){var h=this._observers;if(!h)return!1;var p=h.length,y,w=!1;if(e&&typeof e!="object")throw TypeError("target should be an object");for(;p-- >0;)y=h[p],(!e||y._target===e)&&(y.unsubscribe(r),w=!0);return w},L.prototype.delimiter=".",L.prototype.setMaxListeners=function(e){e!==v&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},L.prototype.getMaxListeners=function(){return this._maxListeners},L.prototype.event="",L.prototype.once=function(e,r,h){return this._once(e,r,!1,h)},L.prototype.prependOnceListener=function(e,r,h){return this._once(e,r,!0,h)},L.prototype._once=function(e,r,h,p){return this._many(e,1,r,h,p)},L.prototype.many=function(e,r,h,p){return this._many(e,r,h,!1,p)},L.prototype.prependMany=function(e,r,h,p){return this._many(e,r,h,!0,p)},L.prototype._many=function(e,r,h,p,y){var w=this;if(typeof h!="function")throw new Error("many only accepts instances of Function");function _(){return--r===0&&w.off(e,_),h.apply(this,arguments)}return _._origin=h,this._on(e,_,p,y)},L.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||a.call(this);var e=arguments[0],r,h=this.wildcard,p,y,w,_,U;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(h&&(r=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(y=e.length,m){for(w=0;w<y;w++)if(typeof e[w]=="symbol"){U=!0;break}}U||(e=e.join(this.delimiter))}var x=arguments.length,S;if(this._all&&this._all.length)for(S=this._all.slice(),w=0,y=S.length;w<y;w++)switch(this.event=e,x){case 1:S[w].call(this,e);break;case 2:S[w].call(this,e,arguments[1]);break;case 3:S[w].call(this,e,arguments[1],arguments[2]);break;default:S[w].apply(this,arguments)}if(h)S=[],D.call(this,S,r,this.listenerTree,0,y);else if(S=this._events[e],typeof S=="function"){switch(this.event=e,x){case 1:S.call(this);break;case 2:S.call(this,arguments[1]);break;case 3:S.call(this,arguments[1],arguments[2]);break;default:for(p=new Array(x-1),_=1;_<x;_++)p[_-1]=arguments[_];S.apply(this,p)}return!0}else S&&(S=S.slice());if(S&&S.length){if(x>3)for(p=new Array(x-1),_=1;_<x;_++)p[_-1]=arguments[_];for(w=0,y=S.length;w<y;w++)switch(this.event=e,x){case 1:S[w].call(this);break;case 2:S[w].call(this,arguments[1]);break;case 3:S[w].call(this,arguments[1],arguments[2]);break;default:S[w].apply(this,p)}return!0}else if(!this.ignoreErrors&&!this._all&&e==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},L.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||a.call(this);var e=arguments[0],r=this.wildcard,h,p,y,w,_,U;if(e==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(r&&(h=e,e!=="newListener"&&e!=="removeListener"&&typeof e=="object")){if(w=e.length,m){for(_=0;_<w;_++)if(typeof e[_]=="symbol"){p=!0;break}}p||(e=e.join(this.delimiter))}var x=[],S=arguments.length,C;if(this._all)for(_=0,w=this._all.length;_<w;_++)switch(this.event=e,S){case 1:x.push(this._all[_].call(this,e));break;case 2:x.push(this._all[_].call(this,e,arguments[1]));break;case 3:x.push(this._all[_].call(this,e,arguments[1],arguments[2]));break;default:x.push(this._all[_].apply(this,arguments))}if(r?(C=[],D.call(this,C,h,this.listenerTree,0)):C=this._events[e],typeof C=="function")switch(this.event=e,S){case 1:x.push(C.call(this));break;case 2:x.push(C.call(this,arguments[1]));break;case 3:x.push(C.call(this,arguments[1],arguments[2]));break;default:for(y=new Array(S-1),U=1;U<S;U++)y[U-1]=arguments[U];x.push(C.apply(this,y))}else if(C&&C.length){if(C=C.slice(),S>3)for(y=new Array(S-1),U=1;U<S;U++)y[U-1]=arguments[U];for(_=0,w=C.length;_<w;_++)switch(this.event=e,S){case 1:x.push(C[_].call(this));break;case 2:x.push(C[_].call(this,arguments[1]));break;case 3:x.push(C[_].call(this,arguments[1],arguments[2]));break;default:x.push(C[_].apply(this,y))}}else if(!this.ignoreErrors&&!this._all&&e==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(x)},L.prototype.on=function(e,r,h){return this._on(e,r,!1,h)},L.prototype.prependListener=function(e,r,h){return this._on(e,r,!0,h)},L.prototype.onAny=function(e){return this._onAny(e,!1)},L.prototype.prependAny=function(e){return this._onAny(e,!0)},L.prototype.addListener=L.prototype.on,L.prototype._onAny=function(e,r){if(typeof e!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),r?this._all.unshift(e):this._all.push(e),this},L.prototype._on=function(e,r,h,p){if(typeof e=="function")return this._onAny(e,r),this;if(typeof r!="function")throw new Error("on only accepts instances of Function");this._events||a.call(this);var y=this,w;return p!==v&&(w=W.call(this,e,r,p),r=w[0],y=w[1]),this._newListener&&this.emit("newListener",e,r),this.wildcard?(R.call(this,e,r,h),y):(this._events[e]?(typeof this._events[e]=="function"&&(this._events[e]=[this._events[e]]),h?this._events[e].unshift(r):this._events[e].push(r),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,k.call(this,this._events[e].length,e))):this._events[e]=r,y)},L.prototype.off=function(e,r){if(typeof r!="function")throw new Error("removeListener only takes instances of Function");var h,p=[];if(this.wildcard){var y=typeof e=="string"?e.split(this.delimiter):e.slice();if(p=D.call(this,null,y,this.listenerTree,0),!p)return this}else{if(!this._events[e])return this;h=this._events[e],p.push({_listeners:h})}for(var w=0;w<p.length;w++){var _=p[w];if(h=_._listeners,l(h)){for(var U=-1,x=0,S=h.length;x<S;x++)if(h[x]===r||h[x].listener&&h[x].listener===r||h[x]._origin&&h[x]._origin===r){U=x;break}if(U<0)continue;return this.wildcard?_._listeners.splice(U,1):this._events[e].splice(U,1),h.length===0&&(this.wildcard?delete _._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,r),this}else(h===r||h.listener&&h.listener===r||h._origin&&h._origin===r)&&(this.wildcard?delete _._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,r))}return this.listenerTree&&F(this.listenerTree),this},L.prototype.offAny=function(e){var r=0,h=0,p;if(e&&this._all&&this._all.length>0){for(p=this._all,r=0,h=p.length;r<h;r++)if(e===p[r])return p.splice(r,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(p=this._all,this._removeListener)for(r=0,h=p.length;r<h;r++)this.emit("removeListenerAny",p[r]);this._all=[]}return this},L.prototype.removeListener=L.prototype.off,L.prototype.removeAllListeners=function(e){if(e===v)return!this._events||a.call(this),this;if(this.wildcard){var r=D.call(this,null,e,this.listenerTree,0),h,p;if(!r)return this;for(p=0;p<r.length;p++)h=r[p],h._listeners=null;this.listenerTree&&F(this.listenerTree)}else this._events&&(this._events[e]=null);return this},L.prototype.listeners=function(e){var r=this._events,h,p,y,w,_;if(e===v){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!r)return[];for(h=c(r),w=h.length,y=[];w-- >0;)p=r[h[w]],typeof p=="function"?y.push(p):y.push.apply(y,p);return y}else{if(this.wildcard){if(_=this.listenerTree,!_)return[];var U=[],x=typeof e=="string"?e.split(this.delimiter):e.slice();return D.call(this,U,x,_,0),U}return r?(p=r[e],p?typeof p=="function"?[p]:p:[]):[]}},L.prototype.eventNames=function(e){var r=this._events;return this.wildcard?G.call(this,this.listenerTree,[],null,e):r?c(r):[]},L.prototype.listenerCount=function(e){return this.listeners(e).length},L.prototype.hasListeners=function(e){if(this.wildcard){var r=[],h=typeof e=="string"?e.split(this.delimiter):e.slice();return D.call(this,r,h,this.listenerTree,0),r.length>0}var p=this._events,y=this._all;return!!(y&&y.length||p&&(e===v?c(p).length:p[e]))},L.prototype.listenersAny=function(){return this._all?this._all:[]},L.prototype.waitFor=function(e,r){var h=this,p=typeof r;return p==="number"?r={timeout:r}:p==="function"&&(r={filter:r}),r=N(r,{timeout:0,filter:v,handleError:!1,Promise,overload:!1},{filter:Q,Promise:P}),Z(r.Promise,function(y,w,_){function U(){var x=r.filter;if(!(x&&!x.apply(h,arguments)))if(h.off(e,U),r.handleError){var S=arguments[0];S?w(S):y(A.apply(null,arguments).slice(1))}else y(A.apply(null,arguments))}_(function(){h.off(e,U)}),h._on(e,U,!1)},{timeout:r.timeout,overload:r.overload})};function I(e,r,h){h=N(h,{Promise,timeout:0,overload:!1},{Promise:P});var p=h.Promise;return Z(p,function(y,w,_){var U;if(typeof e.addEventListener=="function"){U=function(){y(A.apply(null,arguments))},_(function(){e.removeEventListener(r,U)}),e.addEventListener(r,U,{once:!0});return}var x=function(){S&&e.removeListener("error",S),y(A.apply(null,arguments))},S;r!=="error"&&(S=function(C){e.removeListener(r,x),w(C)},e.once("error",S)),_(function(){S&&e.removeListener("error",S),e.removeListener(r,x)}),e.once(r,x)},{timeout:h.timeout,overload:h.overload})}var q=L.prototype;if(Object.defineProperties(L,{defaultMaxListeners:{get:function(){return q._maxListeners},set:function(e){if(typeof e!="number"||e<0||Number.isNaN(e))throw TypeError("n must be a non-negative number");q._maxListeners=e},enumerable:!0},once:{value:I,writable:!0,configurable:!0}}),Object.defineProperties(q,{_maxListeners:{value:d,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof define=="function"&&define.amd)define(function(){return L});else if(typeof E=="object")b.exports=L;else{var re=new Function("","return this")();re.EventEmitter2=L}})()}).call(this)}).call(this,u("_process"),u("timers").setImmediate)},{_process:4,timers:5}],3:[function(u,b,E){var f=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,v=Object.prototype.propertyIsEnumerable;function s(d){if(d==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(d)}function l(){try{if(!Object.assign)return!1;var d=new String("abc");if(d[5]="de",Object.getOwnPropertyNames(d)[0]==="5")return!1;for(var T={},m=0;m<10;m++)T["_"+String.fromCharCode(m)]=m;var n=Object.getOwnPropertyNames(T).map(function(t){return T[t]});if(n.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(t){o[t]=t}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}b.exports=l()?Object.assign:function(d,T){for(var m,n=s(d),o,t=1;t<arguments.length;t++){m=Object(arguments[t]);for(var c in m)i.call(m,c)&&(n[c]=m[c]);if(f){o=f(m);for(var a=0;a<o.length;a++)v.call(m,o[a])&&(n[o[a]]=m[o[a]])}}return n}},{}],4:[function(u,b,E){var f=b.exports={},i,v;function s(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=s}catch{i=s}try{typeof clearTimeout=="function"?v=clearTimeout:v=l}catch{v=l}})();function d(A){if(i===setTimeout)return setTimeout(A,0);if((i===s||!i)&&setTimeout)return i=setTimeout,setTimeout(A,0);try{return i(A,0)}catch{try{return i.call(null,A,0)}catch{return i.call(this,A,0)}}}function T(A){if(v===clearTimeout)return clearTimeout(A);if((v===l||!v)&&clearTimeout)return v=clearTimeout,clearTimeout(A);try{return v(A)}catch{try{return v.call(null,A)}catch{return v.call(this,A)}}}var m=[],n=!1,o,t=-1;function c(){!n||!o||(n=!1,o.length?m=o.concat(m):t=-1,m.length&&a())}function a(){if(!n){var A=d(c);n=!0;for(var M=m.length;M;){for(o=m,m=[];++t<M;)o&&o[t].run();t=-1,M=m.length}o=null,n=!1,T(A)}}f.nextTick=function(A){var M=new Array(arguments.length-1);if(arguments.length>1)for(var O=1;O<arguments.length;O++)M[O-1]=arguments[O];m.push(new g(A,M)),m.length===1&&!n&&d(a)};function g(A,M){this.fun=A,this.array=M}g.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={};function k(){}f.on=k,f.addListener=k,f.once=k,f.off=k,f.removeListener=k,f.removeAllListeners=k,f.emit=k,f.prependListener=k,f.prependOnceListener=k,f.listeners=function(A){return[]},f.binding=function(A){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(A){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],5:[function(u,b,E){(function(f,i){(function(){var v=u("process/browser.js").nextTick,s=Function.prototype.apply,l=Array.prototype.slice,d={},T=0;E.setTimeout=function(){return new m(s.call(setTimeout,window,arguments),clearTimeout)},E.setInterval=function(){return new m(s.call(setInterval,window,arguments),clearInterval)},E.clearTimeout=E.clearInterval=function(n){n.close()};function m(n,o){this._id=n,this._clearFn=o}m.prototype.unref=m.prototype.ref=function(){},m.prototype.close=function(){this._clearFn.call(window,this._id)},E.enroll=function(n,o){clearTimeout(n._idleTimeoutId),n._idleTimeout=o},E.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},E._unrefActive=E.active=function(n){clearTimeout(n._idleTimeoutId);var o=n._idleTimeout;o>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},o))},E.setImmediate=typeof f=="function"?f:function(n){var o=T++,t=arguments.length<2?!1:l.call(arguments,1);return d[o]=!0,v(function(){d[o]&&(t?n.apply(null,t):n.call(null),E.clearImmediate(o))}),o},E.clearImmediate=typeof i=="function"?i:function(n){delete d[n]}}).call(this)}).call(this,u("timers").setImmediate,u("timers").clearImmediate)},{"process/browser.js":4,timers:5}],6:[function(u,b,E){function f(n){var o={};function t(a){if(o[a])return o[a].exports;var g=o[a]={i:a,l:!1,exports:{}};return n[a].call(g.exports,g,g.exports,t),g.l=!0,g.exports}t.m=n,t.c=o,t.i=function(a){return a},t.d=function(a,g,k){t.o(a,g)||Object.defineProperty(a,g,{configurable:!1,enumerable:!0,get:k})},t.r=function(a){Object.defineProperty(a,"__esModule",{value:!0})},t.n=function(a){var g=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(g,"a",g),g},t.o=function(a,g){return Object.prototype.hasOwnProperty.call(a,g)},t.p="/",t.oe=function(a){throw console.error(a),a};var c=t(t.s=ENTRY_MODULE);return c.default||c}var i="[\\.|\\-|\\+|\\w|/|@]+",v="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+i+").*?\\)";function s(n){return(n+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function l(n){return!isNaN(1*n)}function d(n,o,t){var c={};c[t]=[];var a=o.toString(),g=a.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!g)return c;for(var k=g[1],A=new RegExp("(\\\\n|\\W)"+s(k)+v,"g"),M;M=A.exec(a);)M[3]!=="dll-reference"&&c[t].push(M[3]);for(A=new RegExp("\\("+s(k)+'\\("(dll-reference\\s('+i+'))"\\)\\)'+v,"g");M=A.exec(a);)n[M[2]]||(c[t].push(M[1]),n[M[2]]=__webpack_require__(M[1]).m),c[M[2]]=c[M[2]]||[],c[M[2]].push(M[4]);for(var O=Object.keys(c),N=0;N<O.length;N++)for(var P=0;P<c[O[N]].length;P++)l(c[O[N]][P])&&(c[O[N]][P]=1*c[O[N]][P]);return c}function T(n){var o=Object.keys(n);return o.reduce(function(t,c){return t||n[c].length>0},!1)}function m(n,o){for(var t={main:[o]},c={main:[]},a={main:{}};T(t);)for(var g=Object.keys(t),k=0;k<g.length;k++){var A=g[k],M=t[A],O=M.pop();if(a[A]=a[A]||{},!(a[A][O]||!n[A][O])){a[A][O]=!0,c[A]=c[A]||[],c[A].push(O);for(var N=d(n,n[A][O],A),P=Object.keys(N),B=0;B<P.length;B++)t[P[B]]=t[P[B]]||[],t[P[B]]=t[P[B]].concat(N[P[B]])}}return c}b.exports=function(n,o){o=o||{};var t={main:__webpack_modules__},c=o.all?{main:Object.keys(t.main)}:m(t,n),a="";Object.keys(c).filter(function(O){return O!=="main"}).forEach(function(O){for(var N=0;c[O][N];)N++;c[O].push(N),t[O][N]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+O+" = ("+f.toString().replace("ENTRY_MODULE",JSON.stringify(N))+")({"+c[O].map(function(P){return""+JSON.stringify(P)+": "+t[O][P].toString()}).join(",")+`});
`}),a=a+"new (("+f.toString().replace("ENTRY_MODULE",JSON.stringify(n))+")({"+c.main.map(function(O){return""+JSON.stringify(O)+": "+t.main[O].toString()}).join(",")+"}))(self);";var g=new window.Blob([a],{type:"text/javascript"});if(o.bare)return g;var k=window.URL||window.webkitURL||window.mozURL||window.msURL,A=k.createObjectURL(g),M=new window.Worker(A);return M.objectURL=A,M}},{}],7:[function(u,b,E){var f=arguments[3],i=arguments[4],v=arguments[5],s=JSON.stringify;b.exports=function(l,d){for(var T,m=Object.keys(v),n=0,o=m.length;n<o;n++){var t=m[n],c=v[t].exports;if(c===l||c&&c.default===l){T=t;break}}if(!T){T=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var a={},n=0,o=m.length;n<o;n++){var t=m[n];a[t]=t}i[T]=["function(require,module,exports){"+l+"(self); }",a]}var g=Math.floor(Math.pow(16,8)*Math.random()).toString(16),k={};k[T]=T,i[g]=["function(require,module,exports){var f = require("+s(T)+");(f.default ? f.default : f)(self);}",k];var A={};M(g);function M(X){A[X]=!0;for(var Z in i[X][1]){var K=i[X][1][Z];A[K]||M(K)}}var O="("+f+")({"+Object.keys(A).map(function(X){return s(X)+":["+i[X][0]+","+s(i[X][1])+"]"}).join(",")+"},{},["+s(g)+"])",N=window.URL||window.webkitURL||window.mozURL||window.msURL,P=new Blob([O],{type:"text/javascript"});if(d&&d.bare)return P;var B=N.createObjectURL(P),Q=new Worker(B);return Q.objectURL=B,Q}},{}],8:[function(u,b,E){var f=this.ROSLIB||{REVISION:"1.3.0"},i=u("object-assign");i(f,u("./core")),i(f,u("./actionlib")),i(f,u("./math")),i(f,u("./tf")),i(f,u("./urdf")),b.exports=f},{"./actionlib":14,"./core":23,"./math":28,"./tf":31,"./urdf":43,"object-assign":3}],9:[function(u,b,E){(function(f){(function(){f.ROSLIB=u("./RosLib")}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./RosLib":8}],10:[function(u,b,E){var f=u("../core/Topic"),i=u("../core/Message"),v=u("eventemitter2").EventEmitter2;function s(l){var d=this;l=l||{},this.ros=l.ros,this.serverName=l.serverName,this.actionName=l.actionName,this.timeout=l.timeout,this.omitFeedback=l.omitFeedback,this.omitStatus=l.omitStatus,this.omitResult=l.omitResult,this.goals={};var T=!1;this.feedbackListener=new f({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.statusListener=new f({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),this.resultListener=new f({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.goalTopic=new f({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),this.cancelTopic=new f({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"}),this.goalTopic.advertise(),this.cancelTopic.advertise(),this.omitStatus||this.statusListener.subscribe(function(m){T=!0,m.status_list.forEach(function(n){var o=d.goals[n.goal_id.id];o&&o.emit("status",n)})}),this.omitFeedback||this.feedbackListener.subscribe(function(m){var n=d.goals[m.status.goal_id.id];n&&(n.emit("status",m.status),n.emit("feedback",m.feedback))}),this.omitResult||this.resultListener.subscribe(function(m){var n=d.goals[m.status.goal_id.id];n&&(n.emit("status",m.status),n.emit("result",m.result))}),this.timeout&&setTimeout(function(){T||d.emit("timeout")},this.timeout)}s.prototype.__proto__=v.prototype,s.prototype.cancel=function(){var l=new i;this.cancelTopic.publish(l)},s.prototype.dispose=function(){this.goalTopic.unadvertise(),this.cancelTopic.unadvertise(),this.omitStatus||this.statusListener.unsubscribe(),this.omitFeedback||this.feedbackListener.unsubscribe(),this.omitResult||this.resultListener.unsubscribe()},b.exports=s},{"../core/Message":15,"../core/Topic":22,eventemitter2:2}],11:[function(u,b,E){var f=u("../core/Topic");u("../core/Message");var i=u("eventemitter2").EventEmitter2;function v(s){var l=this;s=s||{},this.ros=s.ros,this.serverName=s.serverName,this.actionName=s.actionName;var d=new f({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),T=new f({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),m=new f({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"}),n=new f({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"});d.subscribe(function(o){l.emit("goal",o)}),m.subscribe(function(o){o.status_list.forEach(function(t){l.emit("status",t)})}),T.subscribe(function(o){l.emit("status",o.status),l.emit("feedback",o.feedback)}),n.subscribe(function(o){l.emit("status",o.status),l.emit("result",o.result)})}v.prototype.__proto__=i.prototype,b.exports=v},{"../core/Message":15,"../core/Topic":22,eventemitter2:2}],12:[function(u,b,E){var f=u("../core/Message"),i=u("eventemitter2").EventEmitter2;function v(s){var l=this;this.actionClient=s.actionClient,this.goalMessage=s.goalMessage,this.isFinished=!1;var d=new Date;this.goalID="goal_"+Math.random()+"_"+d.getTime(),this.goalMessage=new f({goal_id:{stamp:{secs:0,nsecs:0},id:this.goalID},goal:this.goalMessage}),this.on("status",function(T){l.status=T}),this.on("result",function(T){l.isFinished=!0,l.result=T}),this.on("feedback",function(T){l.feedback=T}),this.actionClient.goals[this.goalID]=this}v.prototype.__proto__=i.prototype,v.prototype.send=function(s){var l=this;l.actionClient.goalTopic.publish(l.goalMessage),s&&setTimeout(function(){l.isFinished||l.emit("timeout")},s)},v.prototype.cancel=function(){var s=new f({id:this.goalID});this.actionClient.cancelTopic.publish(s)},b.exports=v},{"../core/Message":15,eventemitter2:2}],13:[function(u,b,E){var f=u("../core/Topic"),i=u("../core/Message"),v=u("eventemitter2").EventEmitter2;function s(l){var d=this;l=l||{},this.ros=l.ros,this.serverName=l.serverName,this.actionName=l.actionName,this.feedbackPublisher=new f({ros:this.ros,name:this.serverName+"/feedback",messageType:this.actionName+"Feedback"}),this.feedbackPublisher.advertise();var T=new f({ros:this.ros,name:this.serverName+"/status",messageType:"actionlib_msgs/GoalStatusArray"});T.advertise(),this.resultPublisher=new f({ros:this.ros,name:this.serverName+"/result",messageType:this.actionName+"Result"}),this.resultPublisher.advertise();var m=new f({ros:this.ros,name:this.serverName+"/goal",messageType:this.actionName+"Goal"}),n=new f({ros:this.ros,name:this.serverName+"/cancel",messageType:"actionlib_msgs/GoalID"});this.statusMessage=new i({header:{stamp:{secs:0,nsecs:100},frame_id:""},status_list:[]}),this.currentGoal=null,this.nextGoal=null,m.subscribe(function(t){d.currentGoal?(d.nextGoal=t,d.emit("cancel")):(d.statusMessage.status_list=[{goal_id:t.goal_id,status:1}],d.currentGoal=t,d.emit("goal",t.goal))});var o=function(t,c){return t.secs>c.secs?!1:t.secs<c.secs?!0:t.nsecs<c.nsecs};n.subscribe(function(t){t.stamp.secs===0&&t.stamp.secs===0&&t.id===""?(d.nextGoal=null,d.currentGoal&&d.emit("cancel")):(d.currentGoal&&t.id===d.currentGoal.goal_id.id?d.emit("cancel"):d.nextGoal&&t.id===d.nextGoal.goal_id.id&&(d.nextGoal=null),d.nextGoal&&o(d.nextGoal.goal_id.stamp,t.stamp)&&(d.nextGoal=null),d.currentGoal&&o(d.currentGoal.goal_id.stamp,t.stamp)&&d.emit("cancel"))}),setInterval(function(){var t=new Date,c=Math.floor(t.getTime()/1e3),a=Math.round(1e9*(t.getTime()/1e3-c));d.statusMessage.header.stamp.secs=c,d.statusMessage.header.stamp.nsecs=a,T.publish(d.statusMessage)},500)}s.prototype.__proto__=v.prototype,s.prototype.setSucceeded=function(l){var d=new i({status:{goal_id:this.currentGoal.goal_id,status:3},result:l});this.resultPublisher.publish(d),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},s.prototype.setAborted=function(l){var d=new i({status:{goal_id:this.currentGoal.goal_id,status:4},result:l});this.resultPublisher.publish(d),this.statusMessage.status_list=[],this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},s.prototype.sendFeedback=function(l){var d=new i({status:{goal_id:this.currentGoal.goal_id,status:1},feedback:l});this.feedbackPublisher.publish(d)},s.prototype.setPreempted=function(){this.statusMessage.status_list=[];var l=new i({status:{goal_id:this.currentGoal.goal_id,status:2}});this.resultPublisher.publish(l),this.nextGoal?(this.currentGoal=this.nextGoal,this.nextGoal=null,this.emit("goal",this.currentGoal.goal)):this.currentGoal=null},b.exports=s},{"../core/Message":15,"../core/Topic":22,eventemitter2:2}],14:[function(u,b,E){var f=u("../core/Ros"),i=u("../mixin"),v=b.exports={ActionClient:u("./ActionClient"),ActionListener:u("./ActionListener"),Goal:u("./Goal"),SimpleActionServer:u("./SimpleActionServer")};i(f,["ActionClient","SimpleActionServer"],v)},{"../core/Ros":17,"../mixin":29,"./ActionClient":10,"./ActionListener":11,"./Goal":12,"./SimpleActionServer":13}],15:[function(u,b,E){var f=u("object-assign");function i(v){f(this,v)}b.exports=i},{"object-assign":3}],16:[function(u,b,E){var f=u("./Service"),i=u("./ServiceRequest");function v(s){s=s||{},this.ros=s.ros,this.name=s.name}v.prototype.get=function(s){var l=new f({ros:this.ros,name:"/rosapi/get_param",serviceType:"rosapi/GetParam"}),d=new i({name:this.name});l.callService(d,function(T){var m=JSON.parse(T.value);s(m)})},v.prototype.set=function(s,l){var d=new f({ros:this.ros,name:"/rosapi/set_param",serviceType:"rosapi/SetParam"}),T=new i({name:this.name,value:JSON.stringify(s)});d.callService(T,l)},v.prototype.delete=function(s){var l=new f({ros:this.ros,name:"/rosapi/delete_param",serviceType:"rosapi/DeleteParam"}),d=new i({name:this.name});l.callService(d,s)},b.exports=v},{"./Service":18,"./ServiceRequest":19}],17:[function(u,b,E){var f=u("ws"),i=u("../util/workerSocket"),v=u("./SocketAdapter.js"),s=u("./Service"),l=u("./ServiceRequest"),d=u("object-assign"),T=u("eventemitter2").EventEmitter2;function m(n){n=n||{};var o=this;this.socket=null,this.idCounter=0,this.isConnected=!1,this.transportLibrary=n.transportLibrary||"websocket",this.transportOptions=n.transportOptions||{},this._sendFunc=function(t){o.sendEncodedMessage(t)},typeof n.groovyCompatibility>"u"?this.groovyCompatibility=!0:this.groovyCompatibility=n.groovyCompatibility,this.setMaxListeners(0),n.url&&this.connect(n.url)}m.prototype.__proto__=T.prototype,m.prototype.connect=function(n){if(this.transportLibrary==="socket.io")this.socket=d(io(n,{"force new connection":!0}),v(this)),this.socket.on("connect",this.socket.onopen),this.socket.on("data",this.socket.onmessage),this.socket.on("close",this.socket.onclose),this.socket.on("error",this.socket.onerror);else if(this.transportLibrary.constructor.name==="RTCPeerConnection")this.socket=d(this.transportLibrary.createDataChannel(n,this.transportOptions),v(this));else if(this.transportLibrary==="websocket"){if(!this.socket||this.socket.readyState===f.CLOSED){var o=new f(n);o.binaryType="arraybuffer",this.socket=d(o,v(this))}}else if(this.transportLibrary==="workersocket")this.socket=d(new i(n),v(this));else throw"Unknown transportLibrary: "+this.transportLibrary.toString()},m.prototype.close=function(){this.socket&&this.socket.close()},m.prototype.authenticate=function(n,o,t,c,a,g,k){var A={op:"auth",mac:n,client:o,dest:t,rand:c,t:a,level:g,end:k};this.callOnConnection(A)},m.prototype.sendEncodedMessage=function(n){var o=null,t=this;this.transportLibrary==="socket.io"?o=function(c){t.socket.emit("operation",c)}:o=function(c){t.socket.send(c)},this.isConnected?o(n):t.once("connection",function(){o(n)})},m.prototype.callOnConnection=function(n){this.transportOptions.encoder?this.transportOptions.encoder(n,this._sendFunc):this._sendFunc(JSON.stringify(n))},m.prototype.setStatusLevel=function(n,o){var t={op:"set_level",level:n,id:o};this.callOnConnection(t)},m.prototype.getActionServers=function(n,o){var t=new s({ros:this,name:"/rosapi/action_servers",serviceType:"rosapi/GetActionServers"}),c=new l({});typeof o=="function"?t.callService(c,function(a){n(a.action_servers)},function(a){o(a)}):t.callService(c,function(a){n(a.action_servers)})},m.prototype.getTopics=function(n,o){var t=new s({ros:this,name:"/rosapi/topics",serviceType:"rosapi/Topics"}),c=new l;typeof o=="function"?t.callService(c,function(a){n(a)},function(a){o(a)}):t.callService(c,function(a){n(a)})},m.prototype.getTopicsForType=function(n,o,t){var c=new s({ros:this,name:"/rosapi/topics_for_type",serviceType:"rosapi/TopicsForType"}),a=new l({type:n});typeof t=="function"?c.callService(a,function(g){o(g.topics)},function(g){t(g)}):c.callService(a,function(g){o(g.topics)})},m.prototype.getServices=function(n,o){var t=new s({ros:this,name:"/rosapi/services",serviceType:"rosapi/Services"}),c=new l;typeof o=="function"?t.callService(c,function(a){n(a.services)},function(a){o(a)}):t.callService(c,function(a){n(a.services)})},m.prototype.getServicesForType=function(n,o,t){var c=new s({ros:this,name:"/rosapi/services_for_type",serviceType:"rosapi/ServicesForType"}),a=new l({type:n});typeof t=="function"?c.callService(a,function(g){o(g.services)},function(g){t(g)}):c.callService(a,function(g){o(g.services)})},m.prototype.getServiceRequestDetails=function(n,o,t){var c=new s({ros:this,name:"/rosapi/service_request_details",serviceType:"rosapi/ServiceRequestDetails"}),a=new l({type:n});typeof t=="function"?c.callService(a,function(g){o(g)},function(g){t(g)}):c.callService(a,function(g){o(g)})},m.prototype.getServiceResponseDetails=function(n,o,t){var c=new s({ros:this,name:"/rosapi/service_response_details",serviceType:"rosapi/ServiceResponseDetails"}),a=new l({type:n});typeof t=="function"?c.callService(a,function(g){o(g)},function(g){t(g)}):c.callService(a,function(g){o(g)})},m.prototype.getNodes=function(n,o){var t=new s({ros:this,name:"/rosapi/nodes",serviceType:"rosapi/Nodes"}),c=new l;typeof o=="function"?t.callService(c,function(a){n(a.nodes)},function(a){o(a)}):t.callService(c,function(a){n(a.nodes)})},m.prototype.getNodeDetails=function(n,o,t){var c=new s({ros:this,name:"/rosapi/node_details",serviceType:"rosapi/NodeDetails"}),a=new l({node:n});typeof t=="function"?c.callService(a,function(g){o(g.subscribing,g.publishing,g.services)},function(g){t(g)}):c.callService(a,function(g){o(g)})},m.prototype.getParams=function(n,o){var t=new s({ros:this,name:"/rosapi/get_param_names",serviceType:"rosapi/GetParamNames"}),c=new l;typeof o=="function"?t.callService(c,function(a){n(a.names)},function(a){o(a)}):t.callService(c,function(a){n(a.names)})},m.prototype.getTopicType=function(n,o,t){var c=new s({ros:this,name:"/rosapi/topic_type",serviceType:"rosapi/TopicType"}),a=new l({topic:n});typeof t=="function"?c.callService(a,function(g){o(g.type)},function(g){t(g)}):c.callService(a,function(g){o(g.type)})},m.prototype.getServiceType=function(n,o,t){var c=new s({ros:this,name:"/rosapi/service_type",serviceType:"rosapi/ServiceType"}),a=new l({service:n});typeof t=="function"?c.callService(a,function(g){o(g.type)},function(g){t(g)}):c.callService(a,function(g){o(g.type)})},m.prototype.getMessageDetails=function(n,o,t){var c=new s({ros:this,name:"/rosapi/message_details",serviceType:"rosapi/MessageDetails"}),a=new l({type:n});typeof t=="function"?c.callService(a,function(g){o(g.typedefs)},function(g){t(g)}):c.callService(a,function(g){o(g.typedefs)})},m.prototype.decodeTypeDefs=function(n){var o=this,t=function(c,a){for(var g={},k=0;k<c.fieldnames.length;k++){var A=c.fieldarraylen[k],M=c.fieldnames[k],O=c.fieldtypes[k];if(O.indexOf("/")===-1)A===-1?g[M]=O:g[M]=[O];else{for(var N=!1,P=0;P<a.length;P++)if(a[P].type.toString()===O.toString()){N=a[P];break}if(N){var B=t(N,a);A===-1||(g[M]=[B])}else o.emit("error","Cannot find "+O+" in decodeTypeDefs")}}return g};return t(n[0],n)},m.prototype.getTopicsAndRawTypes=function(n,o){var t=new s({ros:this,name:"/rosapi/topics_and_raw_types",serviceType:"rosapi/TopicsAndRawTypes"}),c=new l;typeof o=="function"?t.callService(c,function(a){n(a)},function(a){o(a)}):t.callService(c,function(a){n(a)})},b.exports=m},{"../util/workerSocket":49,"./Service":18,"./ServiceRequest":19,"./SocketAdapter.js":21,eventemitter2:2,"object-assign":3,ws:46}],18:[function(u,b,E){var f=u("./ServiceResponse");u("./ServiceRequest");var i=u("eventemitter2").EventEmitter2;function v(s){s=s||{},this.ros=s.ros,this.name=s.name,this.serviceType=s.serviceType,this.isAdvertised=!1,this._serviceCallback=null}v.prototype.__proto__=i.prototype,v.prototype.callService=function(s,l,d){if(!this.isAdvertised){var T="call_service:"+this.name+":"+ ++this.ros.idCounter;(l||d)&&this.ros.once(T,function(n){n.result!==void 0&&n.result===!1?typeof d=="function"&&d(n.values):typeof l=="function"&&l(new f(n.values))});var m={op:"call_service",id:T,service:this.name,type:this.serviceType,args:s};this.ros.callOnConnection(m)}},v.prototype.advertise=function(s){this.isAdvertised||typeof s!="function"||(this._serviceCallback=s,this.ros.on(this.name,this._serviceResponse.bind(this)),this.ros.callOnConnection({op:"advertise_service",type:this.serviceType,service:this.name}),this.isAdvertised=!0)},v.prototype.unadvertise=function(){this.isAdvertised&&(this.ros.callOnConnection({op:"unadvertise_service",service:this.name}),this.isAdvertised=!1)},v.prototype._serviceResponse=function(s){var l={},d=this._serviceCallback(s.args,l),T={op:"service_response",service:this.name,values:new f(l),result:d};s.id&&(T.id=s.id),this.ros.callOnConnection(T)},b.exports=v},{"./ServiceRequest":19,"./ServiceResponse":20,eventemitter2:2}],19:[function(u,b,E){var f=u("object-assign");function i(v){f(this,v)}b.exports=i},{"object-assign":3}],20:[function(u,b,E){var f=u("object-assign");function i(v){f(this,v)}b.exports=i},{"object-assign":3}],21:[function(u,b,E){var f=u("../util/decompressPng"),i=u("cbor-js"),v=u("../util/cborTypedArrayTags"),s=null;typeof bson<"u"&&(s=bson().BSON);function l(d){var T=null;d.transportOptions.decoder&&(T=d.transportOptions.decoder);function m(t){t.op==="publish"?d.emit(t.topic,t.msg):t.op==="service_response"?d.emit(t.id,t):t.op==="call_service"?d.emit(t.service,t):t.op==="status"&&(t.id?d.emit("status:"+t.id,t):d.emit("status",t))}function n(t,c){t.op==="png"?f(t.data,c):c(t)}function o(t,c){if(!s)throw"Cannot process BSON encoded message without BSON header.";var a=new FileReader;a.onload=function(){var g=new Uint8Array(this.result),k=s.deserialize(g);c(k)},a.readAsArrayBuffer(t)}return{onopen:function(c){d.isConnected=!0,d.emit("connection",c)},onclose:function(c){d.isConnected=!1,d.emit("close",c)},onerror:function(c){d.emit("error",c)},onmessage:function(c){if(T)T(c.data,function(k){m(k)});else if(typeof Blob<"u"&&c.data instanceof Blob)o(c.data,function(k){n(k,m)});else if(c.data instanceof ArrayBuffer){var a=i.decode(c.data,v);m(a)}else{var g=JSON.parse(typeof c=="string"?c:c.data);n(g,m)}}}}b.exports=l},{"../util/cborTypedArrayTags":44,"../util/decompressPng":48,"cbor-js":1}],22:[function(u,b,E){var f=u("eventemitter2").EventEmitter2,i=u("./Message");function v(s){s=s||{},this.ros=s.ros,this.name=s.name,this.messageType=s.messageType,this.isAdvertised=!1,this.compression=s.compression||"none",this.throttle_rate=s.throttle_rate||0,this.latch=s.latch||!1,this.queue_size=s.queue_size||100,this.queue_length=s.queue_length||0,this.reconnect_on_close=s.reconnect_on_close!==void 0?s.reconnect_on_close:!0,this.compression&&this.compression!=="png"&&this.compression!=="cbor"&&this.compression!=="cbor-raw"&&this.compression!=="none"&&(this.emit("warning",this.compression+" compression is not supported. No compression will be used."),this.compression="none"),this.throttle_rate<0&&(this.emit("warning",this.throttle_rate+" is not allowed. Set to 0"),this.throttle_rate=0);var l=this;this.reconnect_on_close?this.callForSubscribeAndAdvertise=function(d){l.ros.callOnConnection(d),l.waitForReconnect=!1,l.reconnectFunc=function(){l.waitForReconnect||(l.waitForReconnect=!0,l.ros.callOnConnection(d),l.ros.once("connection",function(){l.waitForReconnect=!1}))},l.ros.on("close",l.reconnectFunc)}:this.callForSubscribeAndAdvertise=this.ros.callOnConnection,this._messageCallback=function(d){l.emit("message",new i(d))}}v.prototype.__proto__=f.prototype,v.prototype.subscribe=function(s){typeof s=="function"&&this.on("message",s),!this.subscribeId&&(this.ros.on(this.name,this._messageCallback),this.subscribeId="subscribe:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"subscribe",id:this.subscribeId,type:this.messageType,topic:this.name,compression:this.compression,throttle_rate:this.throttle_rate,queue_length:this.queue_length}))},v.prototype.unsubscribe=function(s){s&&(this.off("message",s),this.listeners("message").length)||this.subscribeId&&(this.ros.off(this.name,this._messageCallback),this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unsubscribe"),this.ros.callOnConnection({op:"unsubscribe",id:this.subscribeId,topic:this.name}),this.subscribeId=null)},v.prototype.advertise=function(){if(!this.isAdvertised&&(this.advertiseId="advertise:"+this.name+":"+ ++this.ros.idCounter,this.callForSubscribeAndAdvertise({op:"advertise",id:this.advertiseId,type:this.messageType,topic:this.name,latch:this.latch,queue_size:this.queue_size}),this.isAdvertised=!0,!this.reconnect_on_close)){var s=this;this.ros.on("close",function(){s.isAdvertised=!1})}},v.prototype.unadvertise=function(){this.isAdvertised&&(this.reconnect_on_close&&this.ros.off("close",this.reconnectFunc),this.emit("unadvertise"),this.ros.callOnConnection({op:"unadvertise",id:this.advertiseId,topic:this.name}),this.isAdvertised=!1)},v.prototype.publish=function(s){this.isAdvertised||this.advertise(),this.ros.idCounter++;var l={op:"publish",id:"publish:"+this.name+":"+this.ros.idCounter,topic:this.name,msg:s,latch:this.latch};this.ros.callOnConnection(l)},b.exports=v},{"./Message":15,eventemitter2:2}],23:[function(u,b,E){var f=u("../mixin"),i=b.exports={Ros:u("./Ros"),Topic:u("./Topic"),Message:u("./Message"),Param:u("./Param"),Service:u("./Service"),ServiceRequest:u("./ServiceRequest"),ServiceResponse:u("./ServiceResponse")};f(i.Ros,["Param","Service","Topic"],i)},{"../mixin":29,"./Message":15,"./Param":16,"./Ros":17,"./Service":18,"./ServiceRequest":19,"./ServiceResponse":20,"./Topic":22}],24:[function(u,b,E){var f=u("./Vector3"),i=u("./Quaternion");function v(s){s=s||{},this.position=new f(s.position),this.orientation=new i(s.orientation)}v.prototype.applyTransform=function(s){this.position.multiplyQuaternion(s.rotation),this.position.add(s.translation);var l=s.rotation.clone();l.multiply(this.orientation),this.orientation=l},v.prototype.clone=function(){return new v(this)},v.prototype.multiply=function(s){var l=s.clone();return l.applyTransform({rotation:this.orientation,translation:this.position}),l},v.prototype.getInverse=function(){var s=this.clone();return s.orientation.invert(),s.position.multiplyQuaternion(s.orientation),s.position.x*=-1,s.position.y*=-1,s.position.z*=-1,s},b.exports=v},{"./Quaternion":25,"./Vector3":27}],25:[function(u,b,E){function f(i){i=i||{},this.x=i.x||0,this.y=i.y||0,this.z=i.z||0,this.w=typeof i.w=="number"?i.w:1}f.prototype.conjugate=function(){this.x*=-1,this.y*=-1,this.z*=-1},f.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},f.prototype.normalize=function(){var i=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);i===0?(this.x=0,this.y=0,this.z=0,this.w=1):(i=1/i,this.x=this.x*i,this.y=this.y*i,this.z=this.z*i,this.w=this.w*i)},f.prototype.invert=function(){this.conjugate(),this.normalize()},f.prototype.multiply=function(i){var v=this.x*i.w+this.y*i.z-this.z*i.y+this.w*i.x,s=-this.x*i.z+this.y*i.w+this.z*i.x+this.w*i.y,l=this.x*i.y-this.y*i.x+this.z*i.w+this.w*i.z,d=-this.x*i.x-this.y*i.y-this.z*i.z+this.w*i.w;this.x=v,this.y=s,this.z=l,this.w=d},f.prototype.clone=function(){return new f(this)},b.exports=f},{}],26:[function(u,b,E){var f=u("./Vector3"),i=u("./Quaternion");function v(s){s=s||{},this.translation=new f(s.translation),this.rotation=new i(s.rotation)}v.prototype.clone=function(){return new v(this)},b.exports=v},{"./Quaternion":25,"./Vector3":27}],27:[function(u,b,E){function f(i){i=i||{},this.x=i.x||0,this.y=i.y||0,this.z=i.z||0}f.prototype.add=function(i){this.x+=i.x,this.y+=i.y,this.z+=i.z},f.prototype.subtract=function(i){this.x-=i.x,this.y-=i.y,this.z-=i.z},f.prototype.multiplyQuaternion=function(i){var v=i.w*this.x+i.y*this.z-i.z*this.y,s=i.w*this.y+i.z*this.x-i.x*this.z,l=i.w*this.z+i.x*this.y-i.y*this.x,d=-i.x*this.x-i.y*this.y-i.z*this.z;this.x=v*i.w+d*-i.x+s*-i.z-l*-i.y,this.y=s*i.w+d*-i.y+l*-i.x-v*-i.z,this.z=l*i.w+d*-i.z+v*-i.y-s*-i.x},f.prototype.clone=function(){return new f(this)},b.exports=f},{}],28:[function(u,b,E){b.exports={Pose:u("./Pose"),Quaternion:u("./Quaternion"),Transform:u("./Transform"),Vector3:u("./Vector3")}},{"./Pose":24,"./Quaternion":25,"./Transform":26,"./Vector3":27}],29:[function(u,b,E){b.exports=function(f,i,v){i.forEach(function(s){var l=v[s];f.prototype[s]=function(d){return d.ros=this,new l(d)}})}},{}],30:[function(u,b,E){var f=u("../actionlib/ActionClient"),i=u("../actionlib/Goal"),v=u("../core/Service.js"),s=u("../core/ServiceRequest.js"),l=u("../core/Topic.js"),d=u("../math/Transform");function T(m){m=m||{},this.ros=m.ros,this.fixedFrame=m.fixedFrame||"base_link",this.angularThres=m.angularThres||2,this.transThres=m.transThres||.01,this.rate=m.rate||10,this.updateDelay=m.updateDelay||50;var n=m.topicTimeout||2,o=Math.floor(n),t=Math.floor((n-o)*1e9);this.topicTimeout={secs:o,nsecs:t},this.serverName=m.serverName||"/tf2_web_republisher",this.repubServiceName=m.repubServiceName||"/republish_tfs",this.currentGoal=!1,this.currentTopic=!1,this.frameInfos={},this.republisherUpdateRequested=!1,this._subscribeCB=null,this._isDisposed=!1,this.actionClient=new f({ros:m.ros,serverName:this.serverName,actionName:"tf2_web_republisher/TFSubscriptionAction",omitStatus:!0,omitResult:!0}),this.serviceClient=new v({ros:m.ros,name:this.repubServiceName,serviceType:"tf2_web_republisher/RepublishTFs"})}T.prototype.processTFArray=function(m){m.transforms.forEach(function(n){var o=n.child_frame_id;o[0]==="/"&&(o=o.substring(1));var t=this.frameInfos[o];t&&(t.transform=new d({translation:n.transform.translation,rotation:n.transform.rotation}),t.cbs.forEach(function(c){c(t.transform)}))},this)},T.prototype.updateGoal=function(){var m={source_frames:Object.keys(this.frameInfos),target_frame:this.fixedFrame,angular_thres:this.angularThres,trans_thres:this.transThres,rate:this.rate};if(this.ros.groovyCompatibility)this.currentGoal&&this.currentGoal.cancel(),this.currentGoal=new i({actionClient:this.actionClient,goalMessage:m}),this.currentGoal.on("feedback",this.processTFArray.bind(this)),this.currentGoal.send();else{m.timeout=this.topicTimeout;var n=new s(m);this.serviceClient.callService(n,this.processResponse.bind(this))}this.republisherUpdateRequested=!1},T.prototype.processResponse=function(m){this._isDisposed||(this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB),this.currentTopic=new l({ros:this.ros,name:m.topic_name,messageType:"tf2_web_republisher/TFArray"}),this._subscribeCB=this.processTFArray.bind(this),this.currentTopic.subscribe(this._subscribeCB))},T.prototype.subscribe=function(m,n){m[0]==="/"&&(m=m.substring(1)),this.frameInfos[m]?this.frameInfos[m].transform&&n(this.frameInfos[m].transform):(this.frameInfos[m]={cbs:[]},this.republisherUpdateRequested||(setTimeout(this.updateGoal.bind(this),this.updateDelay),this.republisherUpdateRequested=!0)),this.frameInfos[m].cbs.push(n)},T.prototype.unsubscribe=function(m,n){m[0]==="/"&&(m=m.substring(1));for(var o=this.frameInfos[m],t=o&&o.cbs||[],c=t.length;c--;)t[c]===n&&t.splice(c,1);(!n||t.length===0)&&delete this.frameInfos[m]},T.prototype.dispose=function(){this._isDisposed=!0,this.actionClient.dispose(),this.currentTopic&&this.currentTopic.unsubscribe(this._subscribeCB)},b.exports=T},{"../actionlib/ActionClient":10,"../actionlib/Goal":12,"../core/Service.js":18,"../core/ServiceRequest.js":19,"../core/Topic.js":22,"../math/Transform":26}],31:[function(u,b,E){var f=u("../core/Ros"),i=u("../mixin"),v=b.exports={TFClient:u("./TFClient")};i(f,["TFClient"],v)},{"../core/Ros":17,"../mixin":29,"./TFClient":30}],32:[function(u,b,E){var f=u("../math/Vector3"),i=u("./UrdfTypes");function v(s){this.dimension=null,this.type=i.URDF_BOX;var l=s.xml.getAttribute("size").split(" ");this.dimension=new f({x:parseFloat(l[0]),y:parseFloat(l[1]),z:parseFloat(l[2])})}b.exports=v},{"../math/Vector3":27,"./UrdfTypes":41}],33:[function(u,b,E){function f(i){var v=i.xml.getAttribute("rgba").split(" ");this.r=parseFloat(v[0]),this.g=parseFloat(v[1]),this.b=parseFloat(v[2]),this.a=parseFloat(v[3])}b.exports=f},{}],34:[function(u,b,E){var f=u("./UrdfTypes");function i(v){this.type=f.URDF_CYLINDER,this.length=parseFloat(v.xml.getAttribute("length")),this.radius=parseFloat(v.xml.getAttribute("radius"))}b.exports=i},{"./UrdfTypes":41}],35:[function(u,b,E){var f=u("../math/Pose"),i=u("../math/Vector3"),v=u("../math/Quaternion");function s(l){this.name=l.xml.getAttribute("name"),this.type=l.xml.getAttribute("type");var d=l.xml.getElementsByTagName("parent");d.length>0&&(this.parent=d[0].getAttribute("link"));var T=l.xml.getElementsByTagName("child");T.length>0&&(this.child=T[0].getAttribute("link"));var m=l.xml.getElementsByTagName("limit");m.length>0&&(this.minval=parseFloat(m[0].getAttribute("lower")),this.maxval=parseFloat(m[0].getAttribute("upper")));var n=l.xml.getElementsByTagName("origin");if(n.length===0)this.origin=new f;else{var o=n[0].getAttribute("xyz"),t=new i;o&&(o=o.split(" "),t=new i({x:parseFloat(o[0]),y:parseFloat(o[1]),z:parseFloat(o[2])}));var c=n[0].getAttribute("rpy"),a=new v;if(c){c=c.split(" ");var g=parseFloat(c[0]),k=parseFloat(c[1]),A=parseFloat(c[2]),M=g/2,O=k/2,N=A/2,P=Math.sin(M)*Math.cos(O)*Math.cos(N)-Math.cos(M)*Math.sin(O)*Math.sin(N),B=Math.cos(M)*Math.sin(O)*Math.cos(N)+Math.sin(M)*Math.cos(O)*Math.sin(N),Q=Math.cos(M)*Math.cos(O)*Math.sin(N)-Math.sin(M)*Math.sin(O)*Math.cos(N),X=Math.cos(M)*Math.cos(O)*Math.cos(N)+Math.sin(M)*Math.sin(O)*Math.sin(N);a=new v({x:P,y:B,z:Q,w:X}),a.normalize()}this.origin=new f({position:t,orientation:a})}}b.exports=s},{"../math/Pose":24,"../math/Quaternion":25,"../math/Vector3":27}],36:[function(u,b,E){var f=u("./UrdfVisual");function i(v){this.name=v.xml.getAttribute("name"),this.visuals=[];for(var s=v.xml.getElementsByTagName("visual"),l=0;l<s.length;l++)this.visuals.push(new f({xml:s[l]}))}b.exports=i},{"./UrdfVisual":42}],37:[function(u,b,E){var f=u("./UrdfColor");function i(s){this.textureFilename=null,this.color=null,this.name=s.xml.getAttribute("name");var l=s.xml.getElementsByTagName("texture");l.length>0&&(this.textureFilename=l[0].getAttribute("filename"));var d=s.xml.getElementsByTagName("color");d.length>0&&(this.color=new f({xml:d[0]}))}i.prototype.isLink=function(){return this.color===null&&this.textureFilename===null};var v=u("object-assign");i.prototype.assign=function(s){return v(this,s)},b.exports=i},{"./UrdfColor":33,"object-assign":3}],38:[function(u,b,E){var f=u("../math/Vector3"),i=u("./UrdfTypes");function v(s){this.scale=null,this.type=i.URDF_MESH,this.filename=s.xml.getAttribute("filename");var l=s.xml.getAttribute("scale");if(l){var d=l.split(" ");this.scale=new f({x:parseFloat(d[0]),y:parseFloat(d[1]),z:parseFloat(d[2])})}}b.exports=v},{"../math/Vector3":27,"./UrdfTypes":41}],39:[function(u,b,E){var f=u("./UrdfMaterial"),i=u("./UrdfLink"),v=u("./UrdfJoint"),s=u("@xmldom/xmldom").DOMParser;function l(d){d=d||{};var T=d.xml,m=d.string;if(this.materials={},this.links={},this.joints={},m){var n=new s;T=n.parseFromString(m,"text/xml")}var o=T.documentElement;this.name=o.getAttribute("name");for(var t=o.childNodes,c=0;c<t.length;c++){var a=t[c];if(a.tagName==="material"){var g=new f({xml:a});this.materials[g.name]!==void 0?this.materials[g.name].isLink()?this.materials[g.name].assign(g):console.warn("Material "+g.name+"is not unique."):this.materials[g.name]=g}else if(a.tagName==="link"){var k=new i({xml:a});if(this.links[k.name]!==void 0)console.warn("Link "+k.name+" is not unique.");else{for(var A=0;A<k.visuals.length;A++){var M=k.visuals[A].material;M!==null&&M.name&&(this.materials[M.name]!==void 0?k.visuals[A].material=this.materials[M.name]:this.materials[M.name]=M)}this.links[k.name]=k}}else if(a.tagName==="joint"){var O=new v({xml:a});this.joints[O.name]=O}}}b.exports=l},{"./UrdfJoint":35,"./UrdfLink":36,"./UrdfMaterial":37,"@xmldom/xmldom":45}],40:[function(u,b,E){var f=u("./UrdfTypes");function i(v){this.type=f.URDF_SPHERE,this.radius=parseFloat(v.xml.getAttribute("radius"))}b.exports=i},{"./UrdfTypes":41}],41:[function(u,b,E){b.exports={URDF_SPHERE:0,URDF_BOX:1,URDF_CYLINDER:2,URDF_MESH:3}},{}],42:[function(u,b,E){var f=u("../math/Pose"),i=u("../math/Vector3"),v=u("../math/Quaternion"),s=u("./UrdfCylinder"),l=u("./UrdfBox"),d=u("./UrdfMaterial"),T=u("./UrdfMesh"),m=u("./UrdfSphere");function n(o){var t=o.xml;this.origin=null,this.geometry=null,this.material=null,this.name=o.xml.getAttribute("name");var c=t.getElementsByTagName("origin");if(c.length===0)this.origin=new f;else{var a=c[0].getAttribute("xyz"),g=new i;a&&(a=a.split(" "),g=new i({x:parseFloat(a[0]),y:parseFloat(a[1]),z:parseFloat(a[2])}));var k=c[0].getAttribute("rpy"),A=new v;if(k){k=k.split(" ");var M=parseFloat(k[0]),O=parseFloat(k[1]),N=parseFloat(k[2]),P=M/2,B=O/2,Q=N/2,X=Math.sin(P)*Math.cos(B)*Math.cos(Q)-Math.cos(P)*Math.sin(B)*Math.sin(Q),Z=Math.cos(P)*Math.sin(B)*Math.cos(Q)+Math.sin(P)*Math.cos(B)*Math.sin(Q),K=Math.cos(P)*Math.cos(B)*Math.sin(Q)-Math.sin(P)*Math.sin(B)*Math.cos(Q),D=Math.cos(P)*Math.cos(B)*Math.cos(Q)+Math.sin(P)*Math.sin(B)*Math.sin(Q);A=new v({x:X,y:Z,z:K,w:D}),A.normalize()}this.origin=new f({position:g,orientation:A})}var R=t.getElementsByTagName("geometry");if(R.length>0){for(var G=R[0],F=null,j=0;j<G.childNodes.length;j++){var W=G.childNodes[j];if(W.nodeType===1){F=W;break}}var L=F.nodeName;L==="sphere"?this.geometry=new m({xml:F}):L==="box"?this.geometry=new l({xml:F}):L==="cylinder"?this.geometry=new s({xml:F}):L==="mesh"?this.geometry=new T({xml:F}):console.warn("Unknown geometry type "+L)}var I=t.getElementsByTagName("material");I.length>0&&(this.material=new d({xml:I[0]}))}b.exports=n},{"../math/Pose":24,"../math/Quaternion":25,"../math/Vector3":27,"./UrdfBox":32,"./UrdfCylinder":34,"./UrdfMaterial":37,"./UrdfMesh":38,"./UrdfSphere":40}],43:[function(u,b,E){b.exports=u("object-assign")({UrdfBox:u("./UrdfBox"),UrdfColor:u("./UrdfColor"),UrdfCylinder:u("./UrdfCylinder"),UrdfLink:u("./UrdfLink"),UrdfMaterial:u("./UrdfMaterial"),UrdfMesh:u("./UrdfMesh"),UrdfModel:u("./UrdfModel"),UrdfSphere:u("./UrdfSphere"),UrdfVisual:u("./UrdfVisual")},u("./UrdfTypes"))},{"./UrdfBox":32,"./UrdfColor":33,"./UrdfCylinder":34,"./UrdfLink":36,"./UrdfMaterial":37,"./UrdfMesh":38,"./UrdfModel":39,"./UrdfSphere":40,"./UrdfTypes":41,"./UrdfVisual":42,"object-assign":3}],44:[function(u,b,E){var f=Math.pow(2,32),i=!1;function v(){i||(i=!0,console.warn("CBOR 64-bit integer array values may lose precision. No further warnings."))}function s(o){v();for(var t=o.byteLength,c=o.byteOffset,a=t/8,g=o.buffer.slice(c,c+t),k=new Uint32Array(g),A=new Array(a),M=0;M<a;M++){var O=M*2,N=k[O],P=k[O+1];A[M]=N+f*P}return A}function l(o){v();for(var t=o.byteLength,c=o.byteOffset,a=t/8,g=o.buffer.slice(c,c+t),k=new Uint32Array(g),A=new Int32Array(g),M=new Array(a),O=0;O<a;O++){var N=O*2,P=k[N],B=A[N+1];M[O]=P+f*B}return M}function d(o,t){var c=o.byteLength,a=o.byteOffset,g=o.buffer.slice(a,a+c);return new t(g)}var T={64:Uint8Array,69:Uint16Array,70:Uint32Array,72:Int8Array,77:Int16Array,78:Int32Array,85:Float32Array,86:Float64Array},m={71:s,79:l};function n(o,t){if(t in T){var c=T[t];return d(o,c)}return t in m?m[t](o):o}typeof b<"u"&&b.exports&&(b.exports=n)},{}],45:[function(u,b,E){E.DOMImplementation=window.DOMImplementation,E.XMLSerializer=window.XMLSerializer,E.DOMParser=window.DOMParser},{}],46:[function(u,b,E){b.exports=typeof window<"u"?window.WebSocket:WebSocket},{}],47:[function(u,b,E){b.exports=function(){return document.createElement("canvas")}},{}],48:[function(u,b,E){var f=u("canvas"),i=f.Image||window.Image;function v(s,l){var d=new i;d.onload=function(){var T=new f,m=T.getContext("2d");T.width=d.width,T.height=d.height,m.imageSmoothingEnabled=!1,m.webkitImageSmoothingEnabled=!1,m.mozImageSmoothingEnabled=!1,m.drawImage(d,0,0);for(var n=m.getImageData(0,0,d.width,d.height).data,o="",t=0;t<n.length;t+=4)o+=String.fromCharCode(n[t],n[t+1],n[t+2]);l(JSON.parse(o))},d.src="data:image/png;base64,"+s}b.exports=v},{canvas:47}],49:[function(u,b,E){try{var f=u("webworkify")}catch{var f=u("webworkify-webpack")}var i=u("./workerSocketImpl");function v(s){this.socket_=f(i),this.socket_.addEventListener("message",this.handleWorkerMessage_.bind(this)),this.socket_.postMessage({uri:s})}v.prototype.handleWorkerMessage_=function(s){var l=s.data;if(l instanceof ArrayBuffer||typeof l=="string")this.onmessage(s);else{var d=l.type;if(d==="close")this.onclose(null);else if(d==="open")this.onopen(null);else if(d==="error")this.onerror(null);else throw"Unknown message from workersocket"}},v.prototype.send=function(s){this.socket_.postMessage(s)},v.prototype.close=function(){this.socket_.postMessage({close:!0})},b.exports=v},{"./workerSocketImpl":50,webworkify:7,"webworkify-webpack":6}],50:[function(u,b,E){var f=f||u("ws");b.exports=function(i){var v=null;function s(d){var T=d.data;T instanceof ArrayBuffer?i.postMessage(T,[T]):i.postMessage(T)}function l(d){i.postMessage({type:d.type})}i.addEventListener("message",function(d){var T=d.data;if(typeof T=="string")v.send(T);else if(T.hasOwnProperty("close"))v.close(),v=null;else if(T.hasOwnProperty("uri")){var m=T.uri;v=new f(m),v.binaryType="arraybuffer",v.onmessage=s,v.onclose=l,v.onopen=l,v.onerror=l}else throw"Unknown message to WorkerSocket"})}},{ws:46}]},{},[9]);
